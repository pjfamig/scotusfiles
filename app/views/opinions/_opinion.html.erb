<div id="<%= dom_id opinion %>">
  
	<div class="feed-item">
		<p class="decision-date">Decided <%= opinion.decision_date.strftime('%B %d, %Y') %></p>
    <p><strong><%= opinion.title %></strong></p>
    
    <p>
      <%= opinion.holding %>
    </p>
    <p>
	    <% opinion.files.each do |file| %>

	    <i class="fa fa-file-text-o" style="font-size:20px"></i>
	      <%= link_to "Local download", rails_blob_path(file, disposition: :inline), :target => '_blank' %>
	    <% end %>
    </p>
<p> <i class="fa fa-file-text-o" style="font-size:20px"></i> <%= link_to "SCOTUS download", opinion.scotus_filename %></p>
</div>

<div class="full-decision">
  <p><strong>Full Decision:</strong></p>

<%= opinion.full_decision %>
</div>

<script>
	var paragraph = document.getElementById("full_decision");
	var text = paragraph.innerText;
	var sentences = text.match(/[^\.!\?]+[\.!\?]+/g);
	var newHTML = "";
	for (let i = 0; i < sentences.length; i++) {
	     if(!isAcronym(sentences[i])){
	       newHTML += `<span class="sentence">${sentences[i]}</span>`;
	     }else{
	       newHTML += sentences[i];
	     }
	}
	paragraph.innerHTML = newHTML;

	var sentenceElements = paragraph.getElementsByClassName("sentence");
	for (let i = 0; i < sentenceElements.length; i++) {
	  sentenceElements[i].addEventListener("mouseover", event => {
	    event.target.style.backgroundColor = "yellow";
	  });
	  sentenceElements[i].addEventListener("mouseout", event => {
	    event.target.style.backgroundColor = "white";
	  });
	}
	
	function isAcronym(sentence) {
	  var acronymRegex = /(^|[\s])[A-Z]\./g;
	  return acronymRegex.test(sentence);
	}
</script>